---
title: "React Hook FormãŒZod v4ã«å…¬å¼å¯¾å¿œã—ã¾ã—ãŸğŸ‰"
emoji: "ğŸ¥ª"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["zod", "reacthookform"]
published: false
publication_name: aprender
---

## ã¯ã˜ã‚ã«

å…ˆæ—¥ Zod ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 4ï¼ˆä»¥ä¸‹ v4ï¼‰ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã­ ğŸ‰ï¼

https://zod.dev/v4

v4 ã§ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚„ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®å¤§å¹…å‰Šæ¸›ã€
ãã—ã¦è»½é‡ç‰ˆã® Zod Mini ã®ç™»å ´ãªã©é–‹ç™ºè€…ã«å¬‰ã—ã„å¯¾å¿œãŒãŸãã•ã‚“å…¥ã£ã¦ã„ã¾ã™ã€‚
ï¼ˆã“ã‚Œã¾ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 3ï¼ˆä»¥ä¸‹ v3ï¼‰ã®ã‚µãƒãƒ¼ãƒˆã‚‚ç¶™ç¶šã—ã¾ã™ã€‚ï¼‰

ä¸€æ–¹ã§ Zod åˆ©ç”¨è€…ã®ä¸­ã«ã¯ React Hook Form ã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ãŒæ°—ã«ãªã£ã¦ã„ãŸæ–¹ã‚‚ãŸãã•ã‚“ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
å…¬å¼ã®å¯¾å¿œæ–¹æ³•ã®ç´¹ä»‹è¨˜äº‹ãŒã¾ã ãªã‹ã£ãŸãŸã‚ã€å…±æœ‰çš„ãªè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

## å¯¾å¿œæ–¹æ³•

`@hookform/resolvers` ã‚’ v5.1.0 ä»¥é™ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§å¯¾å¿œã§ãã¾ã™ï¼
https://github.com/react-hook-form/resolvers/issues/768#issuecomment-2952504129

Zod ä½œè€…è‡ªã‚‰ãŒå‡ºã—ãŸä¿®æ­£ PR ã«ã‚ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¾ã§ã®æ›¸ãæ–¹ã‹ã‚‰å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã‚Œã®ãŠã‹ã’ã§ Zod v4 ã ã‘ã§ãªã Zod Mini ãŠã‚ˆã³ v3 ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚‚ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«å¯¾å¿œãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚

https://github.com/react-hook-form/resolvers/pull/777

### ã‚³ãƒ¼ãƒ‰ä¾‹

[Vite å…¬å¼ã® react-ts ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](https://vite.dev/guide/#scaffolding-your-first-vite-project)ã§å‹•ä½œç¢ºèªã—ãŸä¾‹ã‚’è¼‰ã›ã¦ãŠãã¾ã™ã€‚
å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã“ã‚Œã¾ã§ã¨åŒã˜ã§ã™ã€‚

```shell
$ npm install react-hook-form @hookform/resolvers zod
```

```ts:Example.tsx
import { useForm, type SubmitHandler } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod/v4";

const schema = z.object({
  name: z.string().min(1),
  age: z.number().min(0).max(150),
});

type Schema = z.infer<typeof schema>;

export default function Example() {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<Schema>({
    resolver: zodResolver(schema),
    defaultValues: {
      name: "",
      age: 0,
    },
  });

  const onSubmit: SubmitHandler<Schema> = (data) => console.log(data);

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("name")} />
      {errors.name && <p>{errors.name.message}</p>}
      <input {...register("age", { valueAsNumber: true })} type="number" />
      {errors.age && <p>{errors.age.message}</p>}
      <input type="submit" />
    </form>
  );
}
```

ãªãŠã€Zod Mini ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Zod ã® import ã¨ schema ã®æ›¸ãæ–¹ã‚’ä»¥ä¸‹ã«æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts
import { z } from "zod/v4-mini";

const schema = z.object({
  name: z.string().check(z.minLength(1)),
  age: z.number().check(z.minimum(1), z.maximum(150)),
});
```

### standardSchemaResolver ã‚’ä½¿ã†æ‰‹æ®µã«ã¤ã„ã¦

`standardSchemaResolver` ã‚’ resolver ã«æŒ‡å®šã™ã‚‹æ–¹æ³•ã§è§£æ±ºã™ã‚‹æ–¹æ³•ã‚‚å…±æœ‰ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚[^1]
[^1]: è©³ç´°ã¯è¨˜äº‹ã®ãƒªãƒ³ã‚¯å…ˆã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€Zod v4 ã§ã¯ `standardSchema` ã¨ã„ã†æ¨™æº–åŒ–ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚`standardSchemaResolver` ã¯ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ç”¨ã® resolver ã«ãªã‚Šã¾ã™ã€‚

https://zenn.dev/apple_yagi/articles/e3131cb5bb6b8f

ã—ã‹ã— `useForm` ã® Generics å‹ãŒå›ºå®šã•ã‚Œã¦ã—ã¾ã„ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®å‹ã‚’ã‚»ãƒƒãƒˆã§ããªã„æ¬ ç‚¹ãŒã‚ã‚Šã€ä»Šå›ã®å¯¾å¿œã§ã¯ä¸è¦ã§ã™ã€‚ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ã‚’ä½œã‚‹ä¸Šã§ã“ã“ã¯çµæ§‹ç—›ã„...ï¼‰

https://github.com/react-hook-form/resolvers/issues/768#issuecomment-2878432639

## é–¢é€£ãƒªãƒ³ã‚¯

- https://github.com/react-hook-form/resolvers/issues/768
