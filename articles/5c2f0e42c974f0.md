---
title: "SvelteKitã«Storybookã‚’å°å…¥ã™ã‚‹"
emoji: "ğŸ”¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["sveltekit", "svelte", "storybook"]
published: true
---

Storybook ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 7 ã‹ã‚‰ SvelteKit ã® Built-in ã‚µãƒãƒ¼ãƒˆãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸã€‚

https://twitter.com/storybookjs/status/1631348833916702721

https://storybook.js.org/recipes/@sveltejs/kit

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 6 ä»¥å‰ã§ã¯ç…©é›‘ãªè¨­å®šãŒå¿…è¦ã§ã—ãŸãŒã€7 ä»¥é™ã§ã¯ã“ã‚Œã‚‰ãŒä¸è¦ã¨ãªã‚Šã¾ã—ãŸã€‚
ç¾çŠ¶ã“ã® 7 ã«å¯¾å¿œã—ãŸè¨˜äº‹ãŒè¦‹å½“ãŸã‚‰ãªã‹ã£ãŸãŸã‚ä»Šå›ãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚

store æ©Ÿèƒ½ãªã© SvelteKit ç‰¹æœ‰ã®è¨­å®šã¯ã¾ãŸåˆ¥è¨˜äº‹ã§è¼‰ã›ã‚‹äºˆå®šã§ã™ã€‚

# ç¢ºèªã—ãŸç’°å¢ƒ

- SvelteKit 1.0
- Storybook 7.0
- TypeScript 5.0

# Storybook ã®å°å…¥

æ–°è¦ã‚¢ãƒ—ãƒªã«å°å…¥ã™ã‚‹éš›ã¯ã“ã®ã‚³ãƒãƒ³ãƒ‰ 1 ã¤ã§å®Œçµã—ã¾ã™ã€‚

```bash
$ npx storybook@latest init
```

ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§è¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚
é€”ä¸­ã§ Storybook ã® ESLint ã«é–¢ã™ã‚‹è³ªå•ãŒã•ã‚Œã¾ã™ãŒã€ã“ã‚Œã¯ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Š yes ã§ã„ã„ã‹ã¨ã€‚

```bash
Need to install the following packages:
  storybook@7.0.9
Ok to proceed? (y)

 storybook init - the simplest way to add a Storybook to your project.

 â€¢ Detecting project type. âœ“
    Detected Vite project. Setting builder to Vite
 â€¢ Adding Storybook support to your "SvelteKit" app

added 739 packages, and audited 950 packages in 50s

190 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
. âœ“
 â€¢ Preparing to install dependencies. âœ“


up to date, audited 950 packages in 1s

190 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
. âœ“
ğŸ” checking possible migrations..

attention => Storybook now collects completely anonymous telemetry regarding usage.
This information is used to shape Storybook's roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://storybook.js.org/telemetry


ğŸ” found a 'eslintPlugin' migration:
â•­ Automigration detected â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®â”‚                                                                                                                                  â”‚â”‚   We've detected you are not using our eslint-plugin.                                                                            â”‚â”‚                                                                                                                                  â”‚â”‚   In order to have the best experience with Storybook and follow best practices, we advise you to install                        â”‚â”‚   eslint-plugin-storybook.                                                                                                       â”‚â”‚                                                                                                                                  â”‚â”‚   More info: https://github.com/storybookjs/eslint-plugin-storybook#readme                                                       â”‚â”‚                                                                                                                                  â”‚â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ” Do you want to run the 'eslintPlugin' migration on your project? â€¦ yes
âœ… Adding dependencies: eslint-plugin-storybook

added 3 packages, and audited 953 packages in 2s

190 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
âœ… Adding Storybook plugin to .eslintrc.cjs
âœ… ran eslintPlugin migration

â•­ Migration check ran successfully â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®â”‚                                                                                                                                  â”‚â”‚   Successful migrations:                                                                                                         â”‚â”‚                                                                                                                                  â”‚â”‚   eslintPlugin                                                                                                                   â”‚â”‚                                                                                                                                  â”‚â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                              â”‚â”‚                                                                                                                                  â”‚â”‚   If you'd like to run the migrations again, you can do so by running 'npx storybook@next automigrate'                           â”‚â”‚                                                                                                                                  â”‚â”‚   The automigrations try to migrate common patterns in your project, but might not contain everything needed to migrate to the   â”‚â”‚   latest version of Storybook.                                                                                                   â”‚â”‚                                                                                                                                  â”‚â”‚   Please check the changelog and migration guide for manual migrations and more information:                                     â”‚â”‚   https://storybook.js.org/migration-guides/7.0                                                                                  â”‚â”‚   And reach out on Discord if you need help: https://discord.gg/storybook                                                        â”‚â”‚                                                                                                                                  â”‚â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                              â”‚â”‚                                                                                                                                  â”‚â”‚   You can find more information for a given dependency by running npm ls --depth=1 <package-name>                                â”‚â”‚                                                                                                                                  â”‚â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


For more information visit: https://storybook.js.org

To run your Storybook, type:

   npm run storybook

```

ã¡ãªã¿ã« Storybook ãŒã™ã§ã«å…¥ã£ã¦ã„ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã§ã™ã€‚

```bash
$ npx storybook@latest upgrade
```

`npm run storybook` ã‚’å©ã„ã¦ã€ç”»é¢ã«ã“ã‚ŒãŒå‡ºã‚Œã°å®Œäº†ã§ã™ã€‚

![](/images/sveltekit-storybook.png)

# å°å…¥å¾Œã«è¿½åŠ ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦

ç¾æ™‚ç‚¹ï¼ˆ2023/5/6 æ™‚ç‚¹ï¼‰ã§ã¾ã å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ç®‡æ‰€ã‚‚ã‚ã‚‹ã®ã§ã€
å‚™å¿˜éŒ²ä»£ã‚ã‚Šã¨ã—ã¦è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚

## .storybook ãƒ•ã‚©ãƒ«ãƒ€

TypeScript ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã¨ä¸­èº«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚è‡ªå‹•çš„ã« ts ãƒ•ã‚¡ã‚¤ãƒ«ã§ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚
å‹å®šç¾©ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®è¨­å®šã« Svelte å°‚ç”¨ã®ã‚‚ã®ãŒå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

```ts:.storybook/main.ts
import type { StorybookConfig } from "@storybook/sveltekit";
const config: StorybookConfig = {
  stories: ["../src/**/*.mdx", "../src/**/*.stories.@(js|jsx|ts|tsx)"],
  addons: [
    "@storybook/addon-links",
    "@storybook/addon-essentials",
    "@storybook/addon-interactions",
  ],
  framework: {
    name: "@storybook/sveltekit",
    options: {},
  },
  docs: {
    autodocs: "tag",
  },
};
export default config;
```

```ts:.storybook/preview.ts
import type { Preview } from '@storybook/svelte';

const preview: Preview = {
	parameters: {
		actions: { argTypesRegex: '^on[A-Z].*' },
		controls: {
			matchers: {
				color: /(background|color)$/i,
				date: /Date$/
			}
		}
	}
};

export default preview;
```

## stories ãƒ•ã‚©ãƒ«ãƒ€

ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ä¾‹ã¨ãªã‚‹ svelte ãƒ•ã‚¡ã‚¤ãƒ«ãŠã‚ˆã³ stories ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚
ã“ã¡ã‚‰ã‚‚.storybook ãƒ•ã‚©ãƒ«ãƒ€ã¨åŒã˜ã ts ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã¨ã€ts ãƒ•ã‚¡ã‚¤ãƒ«ã§ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

stories ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ–¹ã¯ Next.js ãªã©ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ä¸€ç·’ãªã®ã§è©³ç´°ã¯çœãã¾ã™ãŒã€
SvelteKit ã§ã¯ import å…ˆã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒ Svelte ã®ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚

```ts:stories/Button.stories.ts
import type { Meta, StoryObj } from "@storybook/svelte";

import Button from "./Button.svelte";

// More on how to set up stories at: https://storybook.js.org/docs/svelte/writing-stories/introduction
const meta = {
  title: "Example/Button",
  component: Button,
  tags: ["autodocs"],
  argTypes: {
    backgroundColor: { control: "color" },
    size: {
      control: { type: "select" },
      options: ["small", "medium", "large"],
    },
  },
} satisfies Meta<Button>;

export default meta;
type Story = StoryObj<typeof meta>;

// More on writing stories with args: https://storybook.js.org/docs/svelte/writing-stories/args
export const Primary: Story = {
  args: {
    primary: true,
    label: "Button",
  },
};

// ä»¥ä¸‹çœç•¥
```

# ä½™è«‡

package.json ã‚’è¦‹ã‚‹ã¨ã€Storybook ã‚’è¿½åŠ å¾Œã€ React ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

- react
- react-dom

ã“ã‚Œã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹é™ã‚Šã€Storybook ã®æ§‹é€ ä¸Šä»•æ–¹ãªã„ã‚ˆã†ã§ã™ã€‚

https://github.com/storybookjs/storybook/blob/91b4484b8a4ba3a41ddd1be37aff24ccd7335df9/code/frameworks/svelte-vite/package.json#L65

# çµ‚ã‚ã‚Šã«

ä»Šå›ã¯ SvelteKit ã«å…¬å¼å¯¾å¿œã•ã‚ŒãŸ Storybook ã®å°å…¥éƒ¨åˆ†ã¾ã§ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚
ã¾ã å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«åæ˜ ã•ã‚Œã¦ã„ãªã„éƒ¨åˆ†ã‚‚å¤šãã€å®Ÿéš›ã«ç’°å¢ƒæ§‹ç¯‰ã—ãªã„ã¨ä¸é€æ˜ãªéƒ¨åˆ†ã‚‚å¤šã„åˆ†é‡ã§ã™ãŒã€å°‘ã—ãšã¤æƒ…å ±ã‚’ã¾ã¨ã‚ã¦è¡ŒããŸã„ã¨ã“ã‚ã§ã™ã€‚
